traits:
  asdf-ruby: true
  Bash: true

scripts:
  mail-setup-ruby:
    exclusive_executor_resource: ruby_{{RUBY}}
    timeout: 20 Minutes
    body: |
      #!/usr/bin/env bash
      set -euxo
      cd $LEIHS_MAIL_DIR
      if [[ ! -d ~/.asdf/plugins/ruby ]]; then
        asdf plugin add ruby https://github.com/asdf-vm/asdf-ruby.git
      else
        asdf plugin update ruby
      fi
      asdf install ruby
      bundle install
