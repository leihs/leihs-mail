include: cider-ci/ruby_task-component.yml

traits:
  OpenJDK: true

scripts:
  build-mail-uberjar:
    timeout: 10 minutes
    exclusive_executor_resource: build-leihs-mail-jar
    body: |
      #!/usr/bin/env bash
      set -euxo
      cd $LEIHS_MAIL_DIR
      ./bin/build

    start_when:
      ruby-install:
        script_key: mail-setup-ruby

